{"ast":null,"code":"var _jsxFileName = \"/Users/jodyzhou/coding-test/cat-shark/src/server.js\";\nvar __jsx = React.createElement;\nimport App from './App';\nimport React from 'react';\nimport express from 'express';\nimport { renderToString } from 'react-dom/server';\nimport { StaticRouter } from 'react-router-dom';\n\nconst assets = require(process.env.RAZZLE_ASSETS_MANIFEST);\n\nconst server = express();\nexport const renderApp = (req, res) => {\n  const context = {};\n  const markup = renderToString(__jsx(StaticRouter, {\n    location: req.url,\n    context: context,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 14,\n      columnNumber: 5\n    }\n  }, __jsx(App, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 15,\n      columnNumber: 7\n    }\n  })));\n  const html = // prettier-ignore\n  `<!doctype html>\n  <html lang=\"\">\n  <head>\n      <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" />\n      <meta charSet='utf-8' />\n      <title>Cat or Shark?</title>\n      <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n      ${assets.client.css ? `<link rel=\"stylesheet\" href=\"${assets.client.css}\">` : ''}\n  </head>\n  <body>\n      <div id=\"root\">${markup}</div>\n      <!-- razzle_static_js -->\n      <script src=\"${assets.client.js}\" defer crossorigin></script>\n  </body>\n</html>`;\n  return {\n    html,\n    context\n  };\n};\nconst sharksList = ['https://founded.media/hiring/photos/sharks/11261840124_dc9ac72bbe_b.jpg', 'https://founded.media/hiring/photos/sharks/513197047_2f861d56cb_b.jpg', 'https://founded.media/hiring/photos/sharks/2989909952_b59500107e_o.jpg', 'https://founded.media/hiring/photos/sharks/4107884442_3baf8985f2_b.jpg', 'https://founded.media/hiring/photos/sharks/3822452418_ffa66da89d_o.jpg', 'https://founded.media/hiring/photos/sharks/3800013954_20fea3a9c9_b.jpg', 'https://founded.media/hiring/photos/sharks/7109693941_250fc6b246_k.jpg', 'https://founded.media/hiring/photos/sharks/8592704407_75c3c7ff53_h.jpg', 'https://founded.media/hiring/photos/sharks/14730744390_cebc28aa86_k.jpg', 'https://founded.media/hiring/photos/sharks/4936728723_91da549b05_b.jpg'];\nconst catsList = ['https://founded.media/hiring/photos/cats/14157413946_fea785b4d6_k.jpg', 'https://founded.media/hiring/photos/cats/16175483119_bd7374d8a8_h.jpg', 'https://founded.media/hiring/photos/cats/13901304865_a444cf4d34_k.jpg', 'https://founded.media/hiring/photos/cats/8311701653_49ed80202c_k.jpg', 'https://founded.media/hiring/photos/cats/13336301695_3c06dd41cc_k.jpg', 'https://founded.media/hiring/photos/cats/38679744435_66279af67c_k.jpg', 'https://founded.media/hiring/photos/cats/6393395037_9cda69da1a_b.jpg', 'https://founded.media/hiring/photos/cats/6977309082_44102ddf51_b.jpg', 'https://founded.media/hiring/photos/cats/11477923503_bbdf86387d_b.jpg', 'https://founded.media/hiring/photos/cats/4481336172_7f464f180d_b.jpg'];\n\nfunction shuffleArray(arr) {\n  arr.sort(() => Math.random() - 0.38);\n}\n\nserver.disable('x-powered-by').use(express.static(process.env.RAZZLE_PUBLIC_DIR)).get('/', (req, res) => {\n  const {\n    html,\n    context\n  } = renderApp(req, res);\n\n  if (context.url) {\n    // Somewhere a `<Redirect>` was rendered\n    return res.redirect(301, context.url);\n  }\n\n  res.send(html);\n}).get('/cat', (req, res) => {\n  res.send(catsList);\n}).get('/shark', (req, res) => {\n  res.send(sharksList);\n}).get('/mix', (req, res) => {\n  const combinedImgs = [...catsList, ...sharksList];\n  shuffleArray(combinedImgs);\n  res.send(combinedImgs);\n});\nexport default server;","map":{"version":3,"sources":["/Users/jodyzhou/coding-test/cat-shark/src/server.js"],"names":["App","React","express","renderToString","StaticRouter","assets","require","process","env","RAZZLE_ASSETS_MANIFEST","server","renderApp","req","res","context","markup","url","html","client","css","js","sharksList","catsList","shuffleArray","arr","sort","Math","random","disable","use","static","RAZZLE_PUBLIC_DIR","get","redirect","send","combinedImgs"],"mappings":"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","sourcesContent":["import App from './App';\nimport React from 'react';\nimport express from 'express';\nimport { renderToString } from 'react-dom/server';\nimport { StaticRouter } from 'react-router-dom';\n\nconst assets = require(process.env.RAZZLE_ASSETS_MANIFEST);\n\nconst server = express();\n\nexport const renderApp = (req, res) => {\n  const context = {};\n  const markup = renderToString(\n    <StaticRouter location={req.url} context={context}>\n      <App />\n    </StaticRouter>\n  );\n\n  const html =\n    // prettier-ignore\n    `<!doctype html>\n  <html lang=\"\">\n  <head>\n      <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" />\n      <meta charSet='utf-8' />\n      <title>Cat or Shark?</title>\n      <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n      ${\n      assets.client.css\n        ? `<link rel=\"stylesheet\" href=\"${assets.client.css}\">`\n        : ''\n      }\n  </head>\n  <body>\n      <div id=\"root\">${markup}</div>\n      <!-- razzle_static_js -->\n      <script src=\"${assets.client.js}\" defer crossorigin></script>\n  </body>\n</html>`;\n\n  return { html, context };\n};\n\nconst sharksList = [\n  'https://founded.media/hiring/photos/sharks/11261840124_dc9ac72bbe_b.jpg',\n  'https://founded.media/hiring/photos/sharks/513197047_2f861d56cb_b.jpg',\n  'https://founded.media/hiring/photos/sharks/2989909952_b59500107e_o.jpg',\n  'https://founded.media/hiring/photos/sharks/4107884442_3baf8985f2_b.jpg',\n  'https://founded.media/hiring/photos/sharks/3822452418_ffa66da89d_o.jpg',\n  'https://founded.media/hiring/photos/sharks/3800013954_20fea3a9c9_b.jpg',\n  'https://founded.media/hiring/photos/sharks/7109693941_250fc6b246_k.jpg',\n  'https://founded.media/hiring/photos/sharks/8592704407_75c3c7ff53_h.jpg',\n  'https://founded.media/hiring/photos/sharks/14730744390_cebc28aa86_k.jpg',\n  'https://founded.media/hiring/photos/sharks/4936728723_91da549b05_b.jpg',\n ];\nconst catsList = [\n  'https://founded.media/hiring/photos/cats/14157413946_fea785b4d6_k.jpg',\n  'https://founded.media/hiring/photos/cats/16175483119_bd7374d8a8_h.jpg',\n  'https://founded.media/hiring/photos/cats/13901304865_a444cf4d34_k.jpg',\n  'https://founded.media/hiring/photos/cats/8311701653_49ed80202c_k.jpg',\n  'https://founded.media/hiring/photos/cats/13336301695_3c06dd41cc_k.jpg',\n  'https://founded.media/hiring/photos/cats/38679744435_66279af67c_k.jpg',\n  'https://founded.media/hiring/photos/cats/6393395037_9cda69da1a_b.jpg',\n  'https://founded.media/hiring/photos/cats/6977309082_44102ddf51_b.jpg',\n  'https://founded.media/hiring/photos/cats/11477923503_bbdf86387d_b.jpg',\n  'https://founded.media/hiring/photos/cats/4481336172_7f464f180d_b.jpg'\n ];\n\n function shuffleArray(arr) {\n  arr.sort(() => Math.random() - 0.38);\n}\n\nserver\n  .disable('x-powered-by')\n  .use(express.static(process.env.RAZZLE_PUBLIC_DIR))\n  .get('/', (req, res) => {\n    const { html, context } = renderApp(req, res);\n\n    if (context.url) {\n      // Somewhere a `<Redirect>` was rendered\n      return res.redirect(301, context.url);\n    }\n\n    res.send(html);\n  }).get('/cat', (req, res)=> {\n    res.send(catsList);\n  })\n  .get('/shark', (req, res)=> {\n    res.send(sharksList);\n  })\n  .get('/mix', (req, res)=> {\n    const combinedImgs = [...catsList, ...sharksList];\n    shuffleArray(combinedImgs);\n    res.send(combinedImgs);\n  });\n\nexport default server;\n"]},"metadata":{},"sourceType":"module"}